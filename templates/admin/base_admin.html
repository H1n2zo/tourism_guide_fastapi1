<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin Panel{% endblock %} - Tourism Guide</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üó∫Ô∏è</text></svg>">
    
    <!-- CDN Links -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/admin.css">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="p-4">
            <h4><i class="fas fa-map-marked-alt"></i> Tourism Admin</h4>
            <hr class="bg-white">
            <small class="text-white-50">Logged in as: <strong>{{ current_user.username }}</strong></small>
        </div>
        
        <nav class="nav flex-column">
            <a class="nav-link {% if request.url.path == '/admin/dashboard' %}active{% endif %}" 
               href="/admin/dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
            <a class="nav-link {% if '/destinations' in request.url.path %}active{% endif %}" 
               href="/admin/destinations">
                <i class="fas fa-map-pin"></i> Destinations
            </a>
            <a class="nav-link {% if request.url.path == '/admin/categories' %}active{% endif %}" 
               href="/admin/categories">
                <i class="fas fa-tags"></i> Categories
            </a>
            <a class="nav-link {% if request.url.path == '/admin/users' %}active{% endif %}" 
               href="/admin/users">
                <i class="fas fa-users"></i> Users
            </a>
            
            <hr class="bg-white mx-3">
            
            <a class="nav-link" href="/" target="_blank">
                <i class="fas fa-globe"></i> View Site
            </a>
            <a class="nav-link" href="/logout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </nav>
        
        <!-- Version Info -->
        <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center">
            <small class="text-white-50">
                Version 2.0.0<br>
                &copy; 2025 Tourism Guide
            </small>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        {% block content %}
        <!-- Content goes here -->
        {% endblock %}
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Auto-dismiss alerts after 5 seconds
        document.addEventListener('DOMContentLoaded', function() {
            const alerts = document.querySelectorAll('.alert:not(.alert-permanent)');
            alerts.forEach(alert => {
                setTimeout(() => {
                    const bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                }, 5000);
            });
        });
        
        // Confirm delete actions
        document.addEventListener('DOMContentLoaded', function() {
            const deleteLinks = document.querySelectorAll('a[href*="/delete/"]');
            deleteLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!this.hasAttribute('data-no-confirm')) {
                        if (!confirm('Are you sure you want to delete this item?')) {
                            e.preventDefault();
                        }
                    }
                });
            });
        });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
